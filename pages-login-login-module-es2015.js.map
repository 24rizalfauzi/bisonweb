{"version":3,"sources":["./src/app/pages/login/login.page.html","./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.scss","./src/app/pages/login/login.page.ts"],"names":[],"mappings":"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","file":"pages-login-login-module-es2015.js","sourcesContent":["export default \"<ion-content id=\\\"content\\\">\\n  <ion-grid style=\\\"background-color: #f2f2f2; -webkit-clip-path: polygon(0 0, 100% 0, 100% 100%, 0 80%);\\n    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 80%);\\\">\\n    <br>\\n    <ion-row>\\n      <ion-col size=\\\"6\\\" align=\\\"right\\\">\\n        <img class=\\\"img-responsive logo-pln-ip\\\" src=\\\"assets/images/logo-pln-ip.png\\\">\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <img class=\\\"img-responsive logo-bali-smart-innovation\\\" src=\\\"assets/images/logo-bali-smart-innovation.png\\\"><br><br><br>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\">\\n        <!-- <form #serverForm=\\\"ngForm\\\" (ngSubmit)=\\\"setServerUrl(serverForm)\\\" method=\\\"post\\\">\\n          <br><br><br>\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">SERVER URL</ion-label>\\n            <ion-input [(ngModel)]=\\\"serverUrl\\\" type=\\\"text\\\" name=\\\"serverUrl\\\" required></ion-input>\\n          </ion-item>\\n          <br><br>\\n          <ion-button size=\\\"large\\\" type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\">SET SERVER</ion-button>\\n        </form> -->\\n        <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"login(form)\\\" method=\\\"post\\\">\\n          <br><br><br>\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">NIP / Email</ion-label>\\n            <ion-input ngModel type=\\\"text\\\" name=\\\"nip\\\" required></ion-input>\\n          </ion-item>\\n          <br><br>\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">Password</ion-label>\\n            <ion-input ngModel type=\\\"password\\\" name=\\\"password\\\" required></ion-input>\\n          </ion-item>\\n          <br>\\n          <div id=\\\"errorMessage\\\" [innerHTML]=\\\"errorMessage\\\"><br>{{errorMessage}}</div>\\n          <br>\\n          <ion-button size=\\\"large\\\" type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\">Masuk</ion-button><br>\\n          <!-- <div id=\\\"spinnerDownloadLink\\\" style=\\\"color: #665; background-color: white; padding: 5px\\\" align=\\\"center\\\"><br>Generate download link for android and windows <ion-spinner name=\\\"lines\\\"></ion-spinner></div>\\n          <ion-button size=\\\"large\\\" id=\\\"downloadPwa\\\" expand=\\\"full\\\" color=\\\"primary\\\">Download APP</ion-button>\\n          <div id=\\\"appInstalled\\\" style=\\\"color: #665; background-color: white; padding: 5px\\\" align=\\\"center\\\"></div>\\n          <div id=\\\"iphoneMessage\\\" style=\\\"color: #665; background-color: white; padding: 5px\\\">Install this webapp to your iPhone: tap <ion-icon name=\\\"share\\\"></ion-icon> and then Add to home screen</div> -->\\n        </form>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","export default \"#errorMessage {\\n  color: #f2f2f2;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbG9naW4vRTpcXEVQXFxCSVNPTkRPQ1NcXEJhbGlTbWFydElubm92YXRpb24vc3JjXFxhcHBcXHBhZ2VzXFxsb2dpblxcbG9naW4ucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDQyxjQUFBO0FDQ0QiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjZXJyb3JNZXNzYWdle1xyXG5cdGNvbG9yOiAjZjJmMmYyO1xyXG59IiwiI2Vycm9yTWVzc2FnZSB7XG4gIGNvbG9yOiAjZjJmMmYyO1xufSJdfQ== */\"","import { Component, OnInit, Input, ViewChild, ViewContainerRef, ComponentFactoryResolver, TemplateRef, ViewEncapsulation } from '@angular/core';\nimport { Platform } from '@ionic/angular';\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\nimport { NgForm } from '@angular/forms';\nimport { ApiService } from 'src/app/services/api.service';\nimport { ConfigService } from 'src/app/services/config.service';\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss']\n})\nexport class LoginPage implements OnInit {\n  public errorMessage: any;\n  public settings : any = JSON.parse(localStorage.getItem('settings'));\n  public deferredPrompt : any;\n\n  constructor(\n    private apiService: ApiService,\n    public config: ConfigService,\n    public platform: Platform\n  ) { }\n  ngOnInit() {\n    // document.getElementById('downloadPwa').style.display = 'none';  \n    // document.getElementById('appInstalled').style.display = 'none';\n    // document.getElementById('spinnerDownloadLink').style.display = 'block';\n    // document.getElementById('iphoneMessage').style.display = 'none';\n    // if(this.platform.is(\"ios\")){\n    //   document.getElementById('iphoneMessage').style.display = 'block';\n    //   document.getElementById('spinnerDownloadLink').style.display = 'none';\n    // } else {\n    //   console.log('!ios')\n    // }\n    // window.addEventListener('beforeinstallprompt', (e) => {\n    //   //  Prevent the mini-infobar from appearing on mobile\n    //   e.preventDefault();\n    //   // Stash the event so it can be triggered later.\n    //   this.deferredPrompt = e;\n    //   // Update UI notify the user they can install the PWA\n    //   document.getElementById('spinnerDownloadLink').style.display = 'none';\n    //   document.getElementById('downloadPwa').style.display = 'block';\n    // });\n    // //button click event to show the promt\n    // document.getElementById('downloadPwa').addEventListener('click', (e) => {\n    //   // Hide the app provided install promotion\n    //   // hideMyInstallPromotion();\n    //   document.getElementById('downloadPwa').style.display = 'none';\n    //   // Show the install prompt\n    //   this.deferredPrompt.prompt();\n    //   // Wait for the user to respond to the prompt\n    //   this.deferredPrompt.userChoice.then((choiceResult) => {\n    //     if (choiceResult.outcome === 'accepted') {\n    //       document.getElementById('appInstalled').innerHTML = 'You accepted the install prompt';\n    //       document.getElementById('appInstalled').style.display = 'block';\n    //     } else {\n    //       document.getElementById('appInstalled').innerHTML = 'You dismissed the install prompt';\n    //       document.getElementById('appInstalled').style.display = 'block';\n    //     }\n    //   })\n    // });\n    // window.addEventListener('appinstalled', (evt) => {\n    //   console.log('Bali Smart Innovation installed');\n    // });\n    // window.addEventListener('load', () => {\n    //   if (matchMedia('(display-mode: standalone)').matches) {\n    //     document.getElementById('appInstalled').innerHTML = 'Bali Smart Innovation installed on your phone';\n    //     document.getElementById('appInstalled').style.display = 'block';\n    //     console.log('Launched: Installed');\n    //   } else {\n    //     console.log('Launched: Browser Tab');\n    //   }\n    // });\n    this.apiService.getSetToken().subscribe(\n      (result: any) => {\n          if(result.token!=undefined){\n            localStorage.setItem('token', result.token)\n            localStorage.setItem('settings', JSON.stringify(result.settings))\n            let elem = document.querySelector('#content');\n            elem.setAttribute(\"style\", \"--background: url('\"+this.config.serverUrl+`/assets/settings/` + result.settings.background_login+\"') no-repeat 0 0/auto 100%;\");\n            if(localStorage.getItem('user')!=undefined){\n              (<any>window).open('/tabs', '_self');\n            }\n          } else {\n            console.log(result)\n            this.apiService.gangguan(result)\n          }\n      },\n      (err: HttpErrorResponse) => {\n        this.apiService.gangguan(err)\n        console.log(err)\n      }\n    );\n  }\n  login (form: NgForm) {\n    var isFormValid = true;\n    this.errorMessage = '';\n    if(form.value.nip=='') {\n      this.errorMessage = this.errorMessage + '<br>nip/email harus diisi<br>'\n      isFormValid = false\n    }\n    if(form.value.password=='') {\n      this.errorMessage = this.errorMessage + '<br>password harus diisi'\n      isFormValid = false\n    }\n\n    if(isFormValid){\n      var inputData = {\n        nip : form.value.nip,\n        password : form.value.password\n      }\n      this.apiService.postData('login', inputData).subscribe(\n        (result: any) => {\n          console.log(result)\n            if (result.responseCode == false ) {\n              this.errorMessage = result.responseMessage\n            } else if (result.responseCode == true ) {\n              localStorage.setItem('user', JSON.stringify(result.user));\n              window.location.href = '/tabs'\n            }\n        },\n        (err: HttpErrorResponse) => {\n          console.log(err)\n          this.apiService.gangguan(err)\n        }\n      );\n    }\n  }\n  setServerUrl(serverForm: NgForm){\n    this.apiService.getSetToken().subscribe(\n      (result: any) => {\n          console.log('result token ' + result)\n          if(result.token!=undefined){\n            localStorage.setItem('token', result.token)\n          } else {\n            console.log(result)\n            this.apiService.gangguan(result)\n          }\n      },\n      (err: HttpErrorResponse) => {\n        console.log(err)\n        this.apiService.gangguan(err)\n      }\n    );\n  }\n}"],"sourceRoot":"webpack:///"}
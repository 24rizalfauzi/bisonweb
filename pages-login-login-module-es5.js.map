{"version":3,"sources":["src/app/pages/login/login.page.html","src/app/pages/login/login-routing.module.ts","src/app/pages/login/login.module.ts","src/app/pages/login/login.page.scss","src/app/pages/login/login.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-content id=\\\"content\\\">\\n  <ion-grid style=\\\"background-color: #f2f2f2; -webkit-clip-path: polygon(0 0, 100% 0, 100% 100%, 0 80%);\\n    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 80%);\\\">\\n    <br>\\n    <ion-row>\\n      <ion-col size=\\\"6\\\" align=\\\"right\\\">\\n        <img class=\\\"img-responsive logo-pln-ip\\\" src=\\\"assets/images/logo-pln-ip.png\\\">\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <img class=\\\"img-responsive logo-bali-smart-innovation\\\" src=\\\"assets/images/logo-bali-smart-innovation.png\\\"><br><br><br>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\">\\n        <!-- <form #serverForm=\\\"ngForm\\\" (ngSubmit)=\\\"setServerUrl(serverForm)\\\" method=\\\"post\\\">\\n          <br><br><br>\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">SERVER URL</ion-label>\\n            <ion-input [(ngModel)]=\\\"serverUrl\\\" type=\\\"text\\\" name=\\\"serverUrl\\\" required></ion-input>\\n          </ion-item>\\n          <br><br>\\n          <ion-button size=\\\"large\\\" type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\">SET SERVER</ion-button>\\n        </form> -->\\n        <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"login(form)\\\" method=\\\"post\\\">\\n          <br><br><br>\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">NIP / Email</ion-label>\\n            <ion-input ngModel type=\\\"text\\\" name=\\\"nip\\\" required></ion-input>\\n          </ion-item>\\n          <br><br>\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">Password</ion-label>\\n            <ion-input ngModel type=\\\"password\\\" name=\\\"password\\\" required></ion-input>\\n          </ion-item>\\n          <br>\\n          <div id=\\\"errorMessage\\\" [innerHTML]=\\\"errorMessage\\\"><br>{{errorMessage}}</div>\\n          <br>\\n          <ion-button size=\\\"large\\\" type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\">Masuk</ion-button><br>\\n          <!-- <div id=\\\"spinnerDownloadLink\\\" style=\\\"color: #665; background-color: white; padding: 5px\\\" align=\\\"center\\\"><br>Generate download link for android and windows <ion-spinner name=\\\"lines\\\"></ion-spinner></div>\\n          <ion-button size=\\\"large\\\" id=\\\"downloadPwa\\\" expand=\\\"full\\\" color=\\\"primary\\\">Download APP</ion-button>\\n          <div id=\\\"appInstalled\\\" style=\\\"color: #665; background-color: white; padding: 5px\\\" align=\\\"center\\\"></div>\\n          <div id=\\\"iphoneMessage\\\" style=\\\"color: #665; background-color: white; padding: 5px\\\">Install this webapp to your iPhone: tap <ion-icon name=\\\"share\\\"></ion-icon> and then Add to home screen</div> -->\\n        </form>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","export default \"#errorMessage {\\n  color: #f2f2f2;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbG9naW4vRTpcXEVQXFxCSVNPTkRPQ1NcXEJhbGlTbWFydElubm92YXRpb24vc3JjXFxhcHBcXHBhZ2VzXFxsb2dpblxcbG9naW4ucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDQyxjQUFBO0FDQ0QiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjZXJyb3JNZXNzYWdle1xyXG5cdGNvbG9yOiAjZjJmMmYyO1xyXG59IiwiI2Vycm9yTWVzc2FnZSB7XG4gIGNvbG9yOiAjZjJmMmYyO1xufSJdfQ== */\"","import { Component, OnInit, Input, ViewChild, ViewContainerRef, ComponentFactoryResolver, TemplateRef, ViewEncapsulation } from '@angular/core';\nimport { Platform } from '@ionic/angular';\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\nimport { NgForm } from '@angular/forms';\nimport { ApiService } from 'src/app/services/api.service';\nimport { ConfigService } from 'src/app/services/config.service';\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss']\n})\nexport class LoginPage implements OnInit {\n  public errorMessage: any;\n  public settings : any = JSON.parse(localStorage.getItem('settings'));\n  public deferredPrompt : any;\n\n  constructor(\n    private apiService: ApiService,\n    public config: ConfigService,\n    public platform: Platform\n  ) { }\n  ngOnInit() {\n    // document.getElementById('downloadPwa').style.display = 'none';  \n    // document.getElementById('appInstalled').style.display = 'none';\n    // document.getElementById('spinnerDownloadLink').style.display = 'block';\n    // document.getElementById('iphoneMessage').style.display = 'none';\n    // if(this.platform.is(\"ios\")){\n    //   document.getElementById('iphoneMessage').style.display = 'block';\n    //   document.getElementById('spinnerDownloadLink').style.display = 'none';\n    // } else {\n    //   console.log('!ios')\n    // }\n    // window.addEventListener('beforeinstallprompt', (e) => {\n    //   //  Prevent the mini-infobar from appearing on mobile\n    //   e.preventDefault();\n    //   // Stash the event so it can be triggered later.\n    //   this.deferredPrompt = e;\n    //   // Update UI notify the user they can install the PWA\n    //   document.getElementById('spinnerDownloadLink').style.display = 'none';\n    //   document.getElementById('downloadPwa').style.display = 'block';\n    // });\n    // //button click event to show the promt\n    // document.getElementById('downloadPwa').addEventListener('click', (e) => {\n    //   // Hide the app provided install promotion\n    //   // hideMyInstallPromotion();\n    //   document.getElementById('downloadPwa').style.display = 'none';\n    //   // Show the install prompt\n    //   this.deferredPrompt.prompt();\n    //   // Wait for the user to respond to the prompt\n    //   this.deferredPrompt.userChoice.then((choiceResult) => {\n    //     if (choiceResult.outcome === 'accepted') {\n    //       document.getElementById('appInstalled').innerHTML = 'You accepted the install prompt';\n    //       document.getElementById('appInstalled').style.display = 'block';\n    //     } else {\n    //       document.getElementById('appInstalled').innerHTML = 'You dismissed the install prompt';\n    //       document.getElementById('appInstalled').style.display = 'block';\n    //     }\n    //   })\n    // });\n    // window.addEventListener('appinstalled', (evt) => {\n    //   console.log('Bali Smart Innovation installed');\n    // });\n    // window.addEventListener('load', () => {\n    //   if (matchMedia('(display-mode: standalone)').matches) {\n    //     document.getElementById('appInstalled').innerHTML = 'Bali Smart Innovation installed on your phone';\n    //     document.getElementById('appInstalled').style.display = 'block';\n    //     console.log('Launched: Installed');\n    //   } else {\n    //     console.log('Launched: Browser Tab');\n    //   }\n    // });\n    this.apiService.getSetToken().subscribe(\n      (result: any) => {\n          if(result.token!=undefined){\n            localStorage.setItem('token', result.token)\n            localStorage.setItem('settings', JSON.stringify(result.settings))\n            let elem = document.querySelector('#content');\n            elem.setAttribute(\"style\", \"--background: url('\"+this.config.serverUrl+`/assets/settings/` + result.settings.background_login+\"') no-repeat 0 0/auto 100%;\");\n            if(localStorage.getItem('user')!=undefined){\n              (<any>window).open('/tabs', '_self');\n            }\n          } else {\n            console.log(result)\n            this.apiService.gangguan(result)\n          }\n      },\n      (err: HttpErrorResponse) => {\n        this.apiService.gangguan(err)\n        console.log(err)\n      }\n    );\n  }\n  login (form: NgForm) {\n    var isFormValid = true;\n    this.errorMessage = '';\n    if(form.value.nip=='') {\n      this.errorMessage = this.errorMessage + '<br>nip/email harus diisi<br>'\n      isFormValid = false\n    }\n    if(form.value.password=='') {\n      this.errorMessage = this.errorMessage + '<br>password harus diisi'\n      isFormValid = false\n    }\n\n    if(isFormValid){\n      var inputData = {\n        nip : form.value.nip,\n        password : form.value.password\n      }\n      this.apiService.postData('login', inputData).subscribe(\n        (result: any) => {\n          console.log(result)\n            if (result.responseCode == false ) {\n              this.errorMessage = result.responseMessage\n            } else if (result.responseCode == true ) {\n              localStorage.setItem('user', JSON.stringify(result.user));\n              window.location.href = '/tabs'\n            }\n        },\n        (err: HttpErrorResponse) => {\n          console.log(err)\n          this.apiService.gangguan(err)\n        }\n      );\n    }\n  }\n  setServerUrl(serverForm: NgForm){\n    this.apiService.getSetToken().subscribe(\n      (result: any) => {\n          console.log('result token ' + result)\n          if(result.token!=undefined){\n            localStorage.setItem('token', result.token)\n          } else {\n            console.log(result)\n            this.apiService.gangguan(result)\n          }\n      },\n      (err: HttpErrorResponse) => {\n        console.log(err)\n        this.apiService.gangguan(err)\n      }\n    );\n  }\n}"],"sourceRoot":"webpack:///","file":"pages-login-login-module-es5.js"}
{"version":3,"sources":["./src/app/pages/ebook/ebook.page.html","./src/app/pages/ebook/ebook-routing.module.ts","./src/app/pages/ebook/ebook.module.ts","./src/app/pages/ebook/ebook.page.scss","./src/app/pages/ebook/ebook.page.ts"],"names":[],"mappings":"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","file":"pages-ebook-ebook-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/\\\" color=\\\"light\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n      E-Book\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n\\t<ion-card class=\\\"welcome-card\\\">\\n\\t    <ion-card-content>\\n\\t\\t\\t<form #form=\\\"ngForm\\\" (ngSubmit)=\\\"uploadEbook(form)\\\" method=\\\"post\\\">\\n\\t\\t\\t\\t<ion-item>\\n\\t\\t\\t\\t\\t<ion-label>Folder</ion-label>\\n\\t\\t\\t\\t\\t<ion-select placeholder=\\\"Pilih Folder\\\" name=\\\"folder\\\" [(ngModel)]=\\\"folder\\\">\\n\\t\\t\\t\\t\\t\\t<ion-select-option *ngFor=\\\"let fld of folderEbook\\\" value=\\\"{{fld}}\\\">{{fld}}</ion-select-option>\\n\\t\\t\\t\\t\\t</ion-select>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t    <ion-item lines=\\\"none\\\">\\n\\t\\t\\t\\t\\t<label class=\\\"custom-file-upload\\\">\\n\\t\\t\\t\\t\\t\\t<ion-input [(ngModel)]=\\\"attachments\\\" type=\\\"file\\\" name=\\\"attachments\\\" multiple (change)=\\\"onChangeAttachments($event)\\\"></ion-input>\\n\\t\\t\\t\\t\\t\\tPilih E-book\\n\\t\\t\\t\\t\\t</label>&nbsp;&nbsp;&nbsp;&nbsp;\\n\\t\\t\\t\\t\\t<div [innerHTML]=\\\"msgAttachment\\\"></div>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<p id=\\\"stlMsgUploadEbook\\\" [innerHTML]=\\\"msgUploadEbook\\\"></p><br>\\n\\t\\t\\t\\t<ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\">Upload E-Book</ion-button>\\n\\t\\t\\t</form>\\n\\t    </ion-card-content>\\n\\t</ion-card>\\n\\t<ion-item>\\n\\t\\t<ion-label>List Ebook : </ion-label>\\n\\t</ion-item>\\n\\t<ion-item>\\n\\t\\t<ion-label>Pilih Folder</ion-label>\\n\\t\\t<ion-select #C (ionChange)=\\\"onChangeFolderList(C.value)\\\">\\n\\t\\t\\t<ion-select-option *ngFor=\\\"let fld of folderEbook\\\" value=\\\"{{fld}}\\\">{{fld}}</ion-select-option>\\n\\t\\t</ion-select>\\n\\t</ion-item>\\n\\t<ion-item *ngFor=\\\"let ebook of showEbooks\\\">\\n\\t    <ion-avatar style=\\\"border-color: white\\\">\\n\\t      <img class=\\\"img-responsive\\\" src=\\\"assets/images/book.png\\\" width=\\\"15\\\" height=\\\"15\\\">\\n\\t    </ion-avatar>&nbsp;&nbsp;&nbsp;\\n\\t    <ion-label>\\n\\t      <p><a [routerDirection]=\\\"'root'\\\" [routerLink]=\\\"'/tabs/profile'\\\" [queryParams]=\\\"{userId:ebook.uploaderId}\\\" style=\\\"text-decoration: none;\\\">{{ebook.uploaderName}}</a></p>\\n\\t      <!-- <h2 (click)=\\\"downloadEbook(ebook.ebookName)\\\">{{ebook.ebookName}}</h2> -->\\n\\t      <h2 *ngFor=\\\"let attachment of ebook.attachments\\\" (click)=\\\"downloadAttachment(attachment)\\\">{{attachment|slice:31}}<br>\\n\\t      </h2>\\n\\t      <p style=\\\"text-align:right\\\">{{ebook.createdDate | date:'dd/MM/yyyy HH:mm:ss'}}</p>\\n\\t    </ion-label>\\n\\t  </ion-item>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EbookPage } from './ebook.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EbookPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EbookPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\n\nimport { EbookPageRoutingModule } from './ebook-routing.module';\n\nimport { EbookPage } from './ebook.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EbookPageRoutingModule,\n    RouterModule.forChild([{ path: '', component: EbookPage }])\n  ],\n  declarations: [EbookPage]\n})\nexport class EbookPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2Vib29rL2Vib29rLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { ApiService } from 'src/app/services/api.service';\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\nimport { NgForm } from '@angular/forms';\nimport { ConfigService } from 'src/app/services/config.service';\n\n@Component({\n  selector: 'app-ebook',\n  templateUrl: './ebook.page.html',\n  styleUrls: ['./ebook.page.scss'],\n})\nexport class EbookPage implements OnInit {\n\n  public msgAttachment: any = \"\";\n  public msgUploadEbook: any = \"\";\n  public stlMsgUploadEbook: any;\n  public ebooks: any;\n  public showEbooks: any;\n  public user: any = JSON.parse(localStorage.getItem('user'))\n  public settings: any = JSON.parse(localStorage.getItem('settings'))\n  public folderEbook: any\n  public folder: any = undefined\n  public attachments: File[];\n\n  constructor(private http: HttpClient, private apiService: ApiService, public config: ConfigService) { }\n\n  ngOnInit() {\n    this.folderEbook = this.settings.folder_ebook.split(\",\")\n  \tthis.getPageEbook()\n  }\n\n  getPageEbook() {\n  \tthis.apiService.postData('getPageEbook', {activeUserId:this.user.id}).subscribe(\n      (result: any) => {\n        if (result.responseCode == true ) {\n          this.ebooks = result.ebooks\n          console.log(result.ebooks)\n        }\n      },\n      (err: HttpErrorResponse) => {\n        console.log(err)\n        this.apiService.gangguan(err)\n      }\n    );\n  }\n\n  downloadAttachment(ebookName){\n    (<any>window).open(this.config.serverUrl+`/api/downloadEbook/` + ebookName, '_self');\n  }\n\n  uploadEbook(form: NgForm){\n    console.log(this.attachments)\n    console.log(this.folder)\n    var validForm = true\n    if (this.folder==undefined) {\n      this.msgUploadEbook = '<br>Folder harus dipilih'\n      document.getElementById('stlMsgUploadEbook').style.color = 'red';\n      validForm = false\n    }\n    if (this.attachments==undefined) {\n      this.msgUploadEbook = this.msgUploadEbook+'<br>Ebook harus di attach'\n      document.getElementById('stlMsgUploadEbook').style.color = 'red';\n      validForm = false\n    }\n    if (validForm) {\n      const inputData = new FormData()\n      const files: Array<File> = this.attachments;\n      if(files==undefined){\n          inputData.append(\"attachments\", undefined); \n      } else {\n        for(let i =0; i < files.length; i++){\n            inputData.append(\"attachments\", files[i], files[i]['name']);\n        }\n      }\n      inputData.append(\"activeUserId\", this.user.id);\n      inputData.append(\"uploaderId\", this.user.id);\n      inputData.append(\"folder\", this.folder);\n      this.apiService.postData('uploadEbook', inputData).subscribe(\n        (result: any) => {\n            console.log(result);\n            if (result.responseCode == false ) {\n              this.msgUploadEbook = result.responseMessage\n              document.getElementById('stlMsgUploadEbook').style.color = 'red';\n            } else if (result.responseCode == true ) {\n              this.attachments = undefined\n              this.folder = undefined\n              this.msgAttachment = ''\n              this.msgUploadEbook = result.responseMessage;\n              document.getElementById('stlMsgUploadEbook').style.color = 'green';\n              this.getPageEbook()\n            }\n        },\n        (err: HttpErrorResponse) => {\n            console.log(err)\n            this.apiService.gangguan(err)\n        }\n      );\n    }\n  }\n\n  onChangeAttachments(attachments) {\n    this.attachments = attachments.target.files;\n    this.msgAttachment = attachments.target.files.length + \" file\" ;\n  }\n\n  onChangeFolderList(folderName) {\n    this.showEbooks = this.ebooks[folderName]\n  }\n\n}\n"],"sourceRoot":"webpack:///"}
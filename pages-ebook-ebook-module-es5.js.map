{"version":3,"sources":["src/app/pages/ebook/ebook.page.html","src/app/pages/ebook/ebook-routing.module.ts","src/app/pages/ebook/ebook.module.ts","src/app/pages/ebook/ebook.page.scss","src/app/pages/ebook/ebook.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/\\\" color=\\\"light\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n      E-Book\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n\\t<ion-card class=\\\"welcome-card\\\">\\n\\t    <ion-card-content>\\n\\t\\t\\t<form #form=\\\"ngForm\\\" (ngSubmit)=\\\"uploadEbook(form)\\\" method=\\\"post\\\">\\n\\t\\t\\t\\t<ion-item>\\n\\t\\t\\t\\t\\t<ion-label>Folder</ion-label>\\n\\t\\t\\t\\t\\t<ion-select placeholder=\\\"Pilih Folder\\\" name=\\\"folder\\\" [(ngModel)]=\\\"folder\\\">\\n\\t\\t\\t\\t\\t\\t<ion-select-option *ngFor=\\\"let fld of folderEbook\\\" value=\\\"{{fld}}\\\">{{fld}}</ion-select-option>\\n\\t\\t\\t\\t\\t</ion-select>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t    <ion-item lines=\\\"none\\\">\\n\\t\\t\\t\\t\\t<label class=\\\"custom-file-upload\\\">\\n\\t\\t\\t\\t\\t\\t<ion-input [(ngModel)]=\\\"attachments\\\" type=\\\"file\\\" name=\\\"attachments\\\" multiple (change)=\\\"onChangeAttachments($event)\\\"></ion-input>\\n\\t\\t\\t\\t\\t\\tPilih E-book\\n\\t\\t\\t\\t\\t</label>&nbsp;&nbsp;&nbsp;&nbsp;\\n\\t\\t\\t\\t\\t<div [innerHTML]=\\\"msgAttachment\\\"></div>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<p id=\\\"stlMsgUploadEbook\\\" [innerHTML]=\\\"msgUploadEbook\\\"></p><br>\\n\\t\\t\\t\\t<ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\">Upload E-Book</ion-button>\\n\\t\\t\\t</form>\\n\\t    </ion-card-content>\\n\\t</ion-card>\\n\\t<ion-item>\\n\\t\\t<ion-label>List Ebook : </ion-label>\\n\\t</ion-item>\\n\\t<ion-item>\\n\\t\\t<ion-label>Pilih Folder</ion-label>\\n\\t\\t<ion-select #C (ionChange)=\\\"onChangeFolderList(C.value)\\\">\\n\\t\\t\\t<ion-select-option *ngFor=\\\"let fld of folderEbook\\\" value=\\\"{{fld}}\\\">{{fld}}</ion-select-option>\\n\\t\\t</ion-select>\\n\\t</ion-item>\\n\\t<ion-item *ngFor=\\\"let ebook of showEbooks\\\">\\n\\t    <ion-avatar style=\\\"border-color: white\\\">\\n\\t      <img class=\\\"img-responsive\\\" src=\\\"assets/images/book.png\\\" width=\\\"15\\\" height=\\\"15\\\">\\n\\t    </ion-avatar>&nbsp;&nbsp;&nbsp;\\n\\t    <ion-label>\\n\\t      <p><a [routerDirection]=\\\"'root'\\\" [routerLink]=\\\"'/tabs/profile'\\\" [queryParams]=\\\"{userId:ebook.uploaderId}\\\" style=\\\"text-decoration: none;\\\">{{ebook.uploaderName}}</a></p>\\n\\t      <!-- <h2 (click)=\\\"downloadEbook(ebook.ebookName)\\\">{{ebook.ebookName}}</h2> -->\\n\\t      <h2 *ngFor=\\\"let attachment of ebook.attachments\\\" (click)=\\\"downloadAttachment(attachment)\\\">{{attachment|slice:31}}<br>\\n\\t      </h2>\\n\\t      <p style=\\\"text-align:right\\\">{{ebook.createdDate | date:'dd/MM/yyyy HH:mm:ss'}}</p>\\n\\t    </ion-label>\\n\\t  </ion-item>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EbookPage } from './ebook.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EbookPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EbookPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\n\nimport { EbookPageRoutingModule } from './ebook-routing.module';\n\nimport { EbookPage } from './ebook.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EbookPageRoutingModule,\n    RouterModule.forChild([{ path: '', component: EbookPage }])\n  ],\n  declarations: [EbookPage]\n})\nexport class EbookPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2Vib29rL2Vib29rLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { ApiService } from 'src/app/services/api.service';\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\nimport { NgForm } from '@angular/forms';\nimport { ConfigService } from 'src/app/services/config.service';\n\n@Component({\n  selector: 'app-ebook',\n  templateUrl: './ebook.page.html',\n  styleUrls: ['./ebook.page.scss'],\n})\nexport class EbookPage implements OnInit {\n\n  public msgAttachment: any = \"\";\n  public msgUploadEbook: any = \"\";\n  public stlMsgUploadEbook: any;\n  public ebooks: any;\n  public showEbooks: any;\n  public user: any = JSON.parse(localStorage.getItem('user'))\n  public settings: any = JSON.parse(localStorage.getItem('settings'))\n  public folderEbook: any\n  public folder: any = undefined\n  public attachments: File[];\n\n  constructor(private http: HttpClient, private apiService: ApiService, public config: ConfigService) { }\n\n  ngOnInit() {\n    this.folderEbook = this.settings.folder_ebook.split(\",\")\n  \tthis.getPageEbook()\n  }\n\n  getPageEbook() {\n  \tthis.apiService.postData('getPageEbook', {activeUserId:this.user.id}).subscribe(\n      (result: any) => {\n        if (result.responseCode == true ) {\n          this.ebooks = result.ebooks\n          console.log(result.ebooks)\n        }\n      },\n      (err: HttpErrorResponse) => {\n        console.log(err)\n        this.apiService.gangguan(err)\n      }\n    );\n  }\n\n  downloadAttachment(ebookName){\n    (<any>window).open(this.config.serverUrl+`/api/downloadEbook/` + ebookName, '_self');\n  }\n\n  uploadEbook(form: NgForm){\n    console.log(this.attachments)\n    console.log(this.folder)\n    var validForm = true\n    if (this.folder==undefined) {\n      this.msgUploadEbook = '<br>Folder harus dipilih'\n      document.getElementById('stlMsgUploadEbook').style.color = 'red';\n      validForm = false\n    }\n    if (this.attachments==undefined) {\n      this.msgUploadEbook = this.msgUploadEbook+'<br>Ebook harus di attach'\n      document.getElementById('stlMsgUploadEbook').style.color = 'red';\n      validForm = false\n    }\n    if (validForm) {\n      const inputData = new FormData()\n      const files: Array<File> = this.attachments;\n      if(files==undefined){\n          inputData.append(\"attachments\", undefined); \n      } else {\n        for(let i =0; i < files.length; i++){\n            inputData.append(\"attachments\", files[i], files[i]['name']);\n        }\n      }\n      inputData.append(\"activeUserId\", this.user.id);\n      inputData.append(\"uploaderId\", this.user.id);\n      inputData.append(\"folder\", this.folder);\n      this.apiService.postData('uploadEbook', inputData).subscribe(\n        (result: any) => {\n            console.log(result);\n            if (result.responseCode == false ) {\n              this.msgUploadEbook = result.responseMessage\n              document.getElementById('stlMsgUploadEbook').style.color = 'red';\n            } else if (result.responseCode == true ) {\n              this.attachments = undefined\n              this.folder = undefined\n              this.msgAttachment = ''\n              this.msgUploadEbook = result.responseMessage;\n              document.getElementById('stlMsgUploadEbook').style.color = 'green';\n              this.getPageEbook()\n            }\n        },\n        (err: HttpErrorResponse) => {\n            console.log(err)\n            this.apiService.gangguan(err)\n        }\n      );\n    }\n  }\n\n  onChangeAttachments(attachments) {\n    this.attachments = attachments.target.files;\n    this.msgAttachment = attachments.target.files.length + \" file\" ;\n  }\n\n  onChangeFolderList(folderName) {\n    this.showEbooks = this.ebooks[folderName]\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"pages-ebook-ebook-module-es5.js"}
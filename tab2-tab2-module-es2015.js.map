{"version":3,"sources":["./src/app/tab2/tab2.page.html","./src/app/tab2/tab2.module.ts","./src/app/tab2/tab2.page.scss","./src/app/tab2/tab2.page.ts"],"names":[],"mappings":"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","file":"tab2-tab2-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/\\\" color=\\\"light\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Notifications\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid *ngIf=\\\"user.role=='admin'\\\">\\n    <ion-row>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\">\\n        <form (ngSubmit)=\\\"insertNotif()\\\" method=\\\"post\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">Tulis Pesan</ion-label>\\n            <ion-textarea [(ngModel)]=\\\"message\\\" name=\\\"message\\\"></ion-textarea>\\n          </ion-item>  \\n          <ion-item>\\n            <label class=\\\"custom-file-upload\\\">\\n              <ion-input [(ngModel)]=\\\"attachments\\\" type=\\\"file\\\" name=\\\"attachments\\\" multiple (change)=\\\"onChangeAttachments($event)\\\"></ion-input>\\n              Lampiran\\n            </label>&nbsp;&nbsp;&nbsp;&nbsp;\\n            <div [innerHTML]=\\\"msgAttachment\\\"></div>\\n          </ion-item>\\n          <!-- <div *ngFor=\\\"let attachmentU of attachmentsUpdate\\\">\\n            <div *ngIf=\\\"attachmentU.split('.').pop()=='jpeg'\\\">\\n              <img class=\\\"img-responsive\\\" src=\\\"{{attachmentUrl}}/{{attachmentU}}\\\" width=\\\"100%\\\">\\n            </div>\\n            <div *ngIf=\\\"attachmentU.split('.').pop()!='jpeg'\\\">\\n              <img class=\\\"img-responsive\\\" src=\\\"assets/images/file.png\\\" width=\\\"15\\\" height=\\\"15\\\">{{attachmentU|slice:31}}\\n            </div>\\n            <br>\\n          </div> -->\\n          <br> \\n          <!-- <ion-item>\\n            <label class=\\\"custom-file-upload\\\">\\n              <ion-input [(ngModel)]=\\\"attachments\\\" type=\\\"file\\\" name=\\\"attachments\\\" multiple (change)=\\\"onChangeAttachments($event)\\\"></ion-input>\\n              Lampiran\\n            </label>&nbsp;&nbsp;&nbsp;&nbsp;\\n            <div [innerHTML]=\\\"msgAttachment\\\"></div>\\n          </ion-item>  -->\\n          <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\">{{mode}}</ion-button>\\n          <ion-button expand=\\\"full\\\" color=\\\"danger\\\" (click)=\\\"modeCreate()\\\" id=\\\"cancel\\\" *ngIf=\\\"mode=='UPDATE'\\\">CANCEL</ion-button>\\n          <br>\\n          <p id=\\\"stlMsgInsertNotif\\\">{{msgInsertNotif}}</p>\\n        </form>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row> \\n  </ion-grid>\\n  <ion-item class=\\\"welcome-card\\\" *ngFor=\\\"let notif of notifications\\\">\\n    <ion-text>\\n      <br>\\n      <ion-icon name=\\\"notifications\\\" style=\\\"color: #3880FF;\\\"></ion-icon>\\n      &nbsp;&nbsp;&nbsp;\\n      <img *ngIf=\\\"user.role=='admin'\\\" src=\\\"assets/images/pencil.png\\\" width=\\\"15\\\" (click)=\\\"modeUpdate(notif.id)\\\">\\n      &nbsp;&nbsp;&nbsp;\\n      {{notif.message}}<br><br>\\n      <div *ngFor=\\\"let attachment of notif.attachments\\\" (click)=\\\"downloadAttachmentNotif(attachment)\\\">\\n        <div *ngIf=\\\"attachment.split('.').pop()=='jpeg'\\\">\\n          <img class=\\\"img-responsive\\\" src=\\\"{{attachmentUrl}}/{{attachment}}\\\" width=\\\"100%\\\">\\n        </div>\\n        <div *ngIf=\\\"attachment.split('.').pop()!='jpeg'\\\">\\n          <img class=\\\"img-responsive\\\" src=\\\"assets/images/file.png\\\" width=\\\"15\\\" height=\\\"15\\\">{{attachment|slice:31}}\\n        </div>\\n        <br>\\n      </div>\\n    </ion-text>\\n  </ion-item>\\n</ion-content>\"","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab2Page } from './tab2.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    RouterModule.forChild([{ path: '', component: Tab2Page }])\n  ],\n  declarations: [Tab2Page]\n})\nexport class Tab2PageModule {}\n","export default \"ion-content ion-toolbar {\\n  --background: translucent;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMi9FOlxcRVBcXEJJU09ORE9DU1xcQmFsaVNtYXJ0SW5ub3ZhdGlvbi9zcmNcXGFwcFxcdGFiMlxcdGFiMi5wYWdlLnNjc3MiLCJzcmMvYXBwL3RhYjIvdGFiMi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSx5QkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvdGFiMi90YWIyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50IGlvbi10b29sYmFyIHtcbiAgLS1iYWNrZ3JvdW5kOiB0cmFuc2x1Y2VudDtcbn0iLCJpb24tY29udGVudCBpb24tdG9vbGJhciB7XG4gIC0tYmFja2dyb3VuZDogdHJhbnNsdWNlbnQ7XG59Il19 */\"","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core'\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http'\nimport { ApiService } from 'src/app/services/api.service'\nimport { NgForm } from '@angular/forms'\nimport { AlertController } from '@ionic/angular'\nimport { Router } from '@angular/router'\nimport { ConfigService } from 'src/app/services/config.service'\n\n@Component({\n  selector: 'app-tab2',\n  templateUrl: 'tab2.page.html',\n  styleUrls: ['tab2.page.scss']\n})\nexport class Tab2Page implements OnInit {\n\n  public mode: any = 'CREATE'\n  public notifId: any = ''\n  public message: any = ''\n  public stlMsgInsertNotif: any\n  public msgInsertNotif: any = \"\"\n  public user: any = JSON.parse(localStorage.getItem('user'))\n  public notifications: any\n  public attachments: File[]\n  public attachmentsUpdate: any\n  public msgAttachment: any \n  public attachmentUrl: any\n\n  constructor(\n    public apiService: ApiService, public alertCtrl: AlertController, public router: Router, public config: ConfigService\n  ) {}\n\n  ngOnInit() {\n    this.attachmentUrl = this.config.serverUrl+`/assets/attachments-notif`\n    this.getPageNotif()\n  }\n\n  onChangeAttachments(attachments) {\n    this.attachments = attachments.target.files\n    this.msgAttachment = attachments.target.files.length + \" file\" \n  }\n\n  getPageNotif(){\n    this.apiService.postData('getPageNotif', {activeUserId:this.user.id}).subscribe(\n      (result: any) => {\n        console.log(result)\n        if (result.responseCode == true ) {\n          this.notifications = result.notifications\n        }\n      },\n      (err: HttpErrorResponse) => {\n          this.apiService.gangguan(err)\n          console.log(err)\n      }\n    )\n  }\n\n  downloadAttachmentNotif(attachment){\n    (<any>window).open(this.config.serverUrl+`/api/downloadAttachmentNotif/` + attachment, '_self')\n  }\n\n  async insertNotif(){\n    var validForm = true\n    if (this.message=='') {\n      validForm = false\n      this.msgInsertNotif = 'Pesan Harus diisi'\n      document.getElementById('stlMsgInsertNotif').style.color = 'red'\n    }\n    if(validForm) {\n      const alert = await this.alertCtrl.create({\n        header: 'Konfirmasi',\n        message: 'Apakah Anda yakin?',\n        buttons: [\n          {\n            text: 'Tidak',\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: (blah) => {\n            }\n          }, {\n            text: 'Ya',\n            handler: () => {\n\n              const inputData = new FormData()\n              const files: Array<File> = this.attachments\n              if(files==undefined){\n                  inputData.append(\"attachments\", undefined) \n              } else {\n                for(let i =0; i < files.length; i++){\n                    inputData.append(\"attachments\", files[i], files[i]['name'])\n                }\n              }\n              inputData.append('activeUserId', this.user.id)\n              inputData.append('message', this.message)\n              if (this.mode=='CREATE') {\n                var endpoint = 'insertNotif'\n              } else {\n                var endpoint = 'updateNotif'\n                inputData.append('id', this.notifId)\n              }\n              this.apiService.postData(endpoint, inputData).subscribe(\n                (result: any) => {       \n                  if (result.responseCode == true ) {\n                    this.message = \"\"\n                    this.msgInsertNotif = result.responseMessage\n                    document.getElementById('stlMsgInsertNotif').style.color = 'green'\n                    this.getPageNotif()\n                  }\n                },\n                (err: HttpErrorResponse) => {\n                    this.apiService.gangguan(err)\n                    console.log(err)\n                }\n              )\n            }\n          }\n        ]\n      })\n      alert.present()\n    }\n  }\n\n  modeUpdate(id){\n    document.querySelector('ion-content').scrollToTop(500);\n    for (var i = 0; i < this.notifications.length; i++){\n      if (this.notifications[i].id == id){\n        this.notifId = this.notifications[i].id\n        this.message = this.notifications[i].message\n        this.attachmentsUpdate = this.notifications[i].attachments\n        //this.attachments = \n      }\n    }\n    //var attachmentsUpdate = this.attachmentsUpdate.split(\",\")\n    //console.log(this.attachmentsUpdate)\n    this.mode = 'UPDATE'\n    this.attachments = undefined\n    this.msgAttachment = this.attachmentsUpdate.length + ' file'\n  }\n\n  modeCreate(){\n    document.querySelector('ion-content').scrollToTop(50000);\n    this.mode = 'CREATE'\n    this.message = ''\n    this.attachmentsUpdate = undefined\n    this.msgAttachment = ''\n  }\n\n}\n"],"sourceRoot":"webpack:///"}
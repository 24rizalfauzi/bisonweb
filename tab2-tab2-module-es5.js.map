{"version":3,"sources":["src/app/tab2/tab2.page.html","src/app/tab2/tab2.module.ts","src/app/tab2/tab2.page.scss","src/app/tab2/tab2.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/\\\" color=\\\"light\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Notifications\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid *ngIf=\\\"user.role=='admin'\\\">\\n    <ion-row>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\">\\n        <form (ngSubmit)=\\\"insertNotif()\\\" method=\\\"post\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">Tulis Pesan</ion-label>\\n            <ion-textarea [(ngModel)]=\\\"message\\\" name=\\\"message\\\"></ion-textarea>\\n          </ion-item>  \\n          <ion-item>\\n            <label class=\\\"custom-file-upload\\\">\\n              <ion-input [(ngModel)]=\\\"attachments\\\" type=\\\"file\\\" name=\\\"attachments\\\" multiple (change)=\\\"onChangeAttachments($event)\\\"></ion-input>\\n              Lampiran\\n            </label>&nbsp;&nbsp;&nbsp;&nbsp;\\n            <div [innerHTML]=\\\"msgAttachment\\\"></div>\\n          </ion-item>\\n          <!-- <div *ngFor=\\\"let attachmentU of attachmentsUpdate\\\">\\n            <div *ngIf=\\\"attachmentU.split('.').pop()=='jpeg'\\\">\\n              <img class=\\\"img-responsive\\\" src=\\\"{{attachmentUrl}}/{{attachmentU}}\\\" width=\\\"100%\\\">\\n            </div>\\n            <div *ngIf=\\\"attachmentU.split('.').pop()!='jpeg'\\\">\\n              <img class=\\\"img-responsive\\\" src=\\\"assets/images/file.png\\\" width=\\\"15\\\" height=\\\"15\\\">{{attachmentU|slice:31}}\\n            </div>\\n            <br>\\n          </div> -->\\n          <br> \\n          <!-- <ion-item>\\n            <label class=\\\"custom-file-upload\\\">\\n              <ion-input [(ngModel)]=\\\"attachments\\\" type=\\\"file\\\" name=\\\"attachments\\\" multiple (change)=\\\"onChangeAttachments($event)\\\"></ion-input>\\n              Lampiran\\n            </label>&nbsp;&nbsp;&nbsp;&nbsp;\\n            <div [innerHTML]=\\\"msgAttachment\\\"></div>\\n          </ion-item>  -->\\n          <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\">{{mode}}</ion-button>\\n          <ion-button expand=\\\"full\\\" color=\\\"danger\\\" (click)=\\\"modeCreate()\\\" id=\\\"cancel\\\" *ngIf=\\\"mode=='UPDATE'\\\">CANCEL</ion-button>\\n          <br>\\n          <p id=\\\"stlMsgInsertNotif\\\">{{msgInsertNotif}}</p>\\n        </form>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row> \\n  </ion-grid>\\n  <ion-item class=\\\"welcome-card\\\" *ngFor=\\\"let notif of notifications\\\">\\n    <ion-text>\\n      <br>\\n      <ion-icon name=\\\"notifications\\\" style=\\\"color: #3880FF;\\\"></ion-icon>\\n      &nbsp;&nbsp;&nbsp;\\n      <img *ngIf=\\\"user.role=='admin'\\\" src=\\\"assets/images/pencil.png\\\" width=\\\"15\\\" (click)=\\\"modeUpdate(notif.id)\\\">\\n      &nbsp;&nbsp;&nbsp;\\n      {{notif.message}}<br><br>\\n      <div *ngFor=\\\"let attachment of notif.attachments\\\" (click)=\\\"downloadAttachmentNotif(attachment)\\\">\\n        <div *ngIf=\\\"attachment.split('.').pop()=='jpeg'\\\">\\n          <img class=\\\"img-responsive\\\" src=\\\"{{attachmentUrl}}/{{attachment}}\\\" width=\\\"100%\\\">\\n        </div>\\n        <div *ngIf=\\\"attachment.split('.').pop()!='jpeg'\\\">\\n          <img class=\\\"img-responsive\\\" src=\\\"assets/images/file.png\\\" width=\\\"15\\\" height=\\\"15\\\">{{attachment|slice:31}}\\n        </div>\\n        <br>\\n      </div>\\n    </ion-text>\\n  </ion-item>\\n</ion-content>\"","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab2Page } from './tab2.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    RouterModule.forChild([{ path: '', component: Tab2Page }])\n  ],\n  declarations: [Tab2Page]\n})\nexport class Tab2PageModule {}\n","export default \"ion-content ion-toolbar {\\n  --background: translucent;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMi9FOlxcRVBcXEJJU09ORE9DU1xcQmFsaVNtYXJ0SW5ub3ZhdGlvbi9zcmNcXGFwcFxcdGFiMlxcdGFiMi5wYWdlLnNjc3MiLCJzcmMvYXBwL3RhYjIvdGFiMi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSx5QkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvdGFiMi90YWIyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50IGlvbi10b29sYmFyIHtcbiAgLS1iYWNrZ3JvdW5kOiB0cmFuc2x1Y2VudDtcbn0iLCJpb24tY29udGVudCBpb24tdG9vbGJhciB7XG4gIC0tYmFja2dyb3VuZDogdHJhbnNsdWNlbnQ7XG59Il19 */\"","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core'\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http'\nimport { ApiService } from 'src/app/services/api.service'\nimport { NgForm } from '@angular/forms'\nimport { AlertController } from '@ionic/angular'\nimport { Router } from '@angular/router'\nimport { ConfigService } from 'src/app/services/config.service'\n\n@Component({\n  selector: 'app-tab2',\n  templateUrl: 'tab2.page.html',\n  styleUrls: ['tab2.page.scss']\n})\nexport class Tab2Page implements OnInit {\n\n  public mode: any = 'CREATE'\n  public notifId: any = ''\n  public message: any = ''\n  public stlMsgInsertNotif: any\n  public msgInsertNotif: any = \"\"\n  public user: any = JSON.parse(localStorage.getItem('user'))\n  public notifications: any\n  public attachments: File[]\n  public attachmentsUpdate: any\n  public msgAttachment: any \n  public attachmentUrl: any\n\n  constructor(\n    public apiService: ApiService, public alertCtrl: AlertController, public router: Router, public config: ConfigService\n  ) {}\n\n  ngOnInit() {\n    this.attachmentUrl = this.config.serverUrl+`/assets/attachments-notif`\n    this.getPageNotif()\n  }\n\n  onChangeAttachments(attachments) {\n    this.attachments = attachments.target.files\n    this.msgAttachment = attachments.target.files.length + \" file\" \n  }\n\n  getPageNotif(){\n    this.apiService.postData('getPageNotif', {activeUserId:this.user.id}).subscribe(\n      (result: any) => {\n        console.log(result)\n        if (result.responseCode == true ) {\n          this.notifications = result.notifications\n        }\n      },\n      (err: HttpErrorResponse) => {\n          this.apiService.gangguan(err)\n          console.log(err)\n      }\n    )\n  }\n\n  downloadAttachmentNotif(attachment){\n    (<any>window).open(this.config.serverUrl+`/api/downloadAttachmentNotif/` + attachment, '_self')\n  }\n\n  async insertNotif(){\n    var validForm = true\n    if (this.message=='') {\n      validForm = false\n      this.msgInsertNotif = 'Pesan Harus diisi'\n      document.getElementById('stlMsgInsertNotif').style.color = 'red'\n    }\n    if(validForm) {\n      const alert = await this.alertCtrl.create({\n        header: 'Konfirmasi',\n        message: 'Apakah Anda yakin?',\n        buttons: [\n          {\n            text: 'Tidak',\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: (blah) => {\n            }\n          }, {\n            text: 'Ya',\n            handler: () => {\n\n              const inputData = new FormData()\n              const files: Array<File> = this.attachments\n              if(files==undefined){\n                  inputData.append(\"attachments\", undefined) \n              } else {\n                for(let i =0; i < files.length; i++){\n                    inputData.append(\"attachments\", files[i], files[i]['name'])\n                }\n              }\n              inputData.append('activeUserId', this.user.id)\n              inputData.append('message', this.message)\n              if (this.mode=='CREATE') {\n                var endpoint = 'insertNotif'\n              } else {\n                var endpoint = 'updateNotif'\n                inputData.append('id', this.notifId)\n              }\n              this.apiService.postData(endpoint, inputData).subscribe(\n                (result: any) => {       \n                  if (result.responseCode == true ) {\n                    this.message = \"\"\n                    this.msgInsertNotif = result.responseMessage\n                    document.getElementById('stlMsgInsertNotif').style.color = 'green'\n                    this.getPageNotif()\n                  }\n                },\n                (err: HttpErrorResponse) => {\n                    this.apiService.gangguan(err)\n                    console.log(err)\n                }\n              )\n            }\n          }\n        ]\n      })\n      alert.present()\n    }\n  }\n\n  modeUpdate(id){\n    document.querySelector('ion-content').scrollToTop(500);\n    for (var i = 0; i < this.notifications.length; i++){\n      if (this.notifications[i].id == id){\n        this.notifId = this.notifications[i].id\n        this.message = this.notifications[i].message\n        this.attachmentsUpdate = this.notifications[i].attachments\n        //this.attachments = \n      }\n    }\n    //var attachmentsUpdate = this.attachmentsUpdate.split(\",\")\n    //console.log(this.attachmentsUpdate)\n    this.mode = 'UPDATE'\n    this.attachments = undefined\n    this.msgAttachment = this.attachmentsUpdate.length + ' file'\n  }\n\n  modeCreate(){\n    document.querySelector('ion-content').scrollToTop(50000);\n    this.mode = 'CREATE'\n    this.message = ''\n    this.attachmentsUpdate = undefined\n    this.msgAttachment = ''\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"tab2-tab2-module-es5.js"}